<?xml version="1.0" encoding="UTF-8"?>
<!-- 编辑使用 XMLSpy v2006 U (http://www.altova.com) 由 any (any) -->
<!-- 编辑使用 XMLSpy v2006 U (http://www.altova.com) 由 any (any) -->
<!-- 编辑使用 XMLSpy v2006 U (http://www.altova.com) 由 any (any) -->
<!-- 编辑使用 XMLSpy v2006 U (http://www.altova.com) 由 any (any) -->
<!-- 编辑使用 XMLSpy v2006 U (http://www.altova.com) 由 any (any) -->
<!-- 编辑使用 XMLSpy v2006 U (http://www.altova.com) 由 any (any) -->
<!-- 编辑使用 XMLSpy v2006 U (http://www.altova.com) 由 any (any) -->
<!-- 编辑使用 XMLSpy v2006 U (http://www.altova.com) 由 any (any) -->
<!-- 编辑使用 XMLSpy v2006 U (http://www.altova.com) 由 any (any) -->
<!-- 编辑使用 XMLSpy v2006 U (http://www.altova.com) 由 any (any) -->
<!-- 编辑使用 XMLSpy v2006 U (http://www.altova.com) 由 any (any) -->
<Tasks xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="C:\mydoc\myprojects\ereminder\Reminder\modules\shopping\src\main\resources\Task_2_0.xsd" rootVolume="999990" storeId="nasdaq-quote-premarket" productType="default">
	<PrdTask tryPattern="false">
		<baseBrowseTask enableJS="true" dsm="nothing" taskName="quote-premarket-0" mbMemoryNeeded="1024">
			<param name="marketId"/>
			<param name="stockid"/>
			<param name="startDate"/>
			<param name="endDate"/>
			<param name="HasHeader" type="boolean" value="false"/>
			<startUrl value="http://www.nasdaq.com/zh/symbol/[stockid]/premarket"/>
			<userAttribute name="dateDisplay">
				<value value="//div[@id='quotes_content_left__panelGoodSymbol']/div[2]/small/text()" toType="date" format="yyyy/MM/dd">
					<strPreprocess trimPost="上一次收盘"/>
				</value>
			</userAttribute>
			<userAttribute name="id">
				<value value="stockid + '_' + (new Date(dateDisplay)).getFullYear() + '-' + ((new Date(dateDisplay)).getMonth()+1) + '-' + (new Date(dateDisplay)).getDate()" fromType="expression"/>
			</userAttribute>
			<userAttribute name="ColNum">
				<value value="3" toType="list" toEntryType="int"/>
			</userAttribute>
			<userAttribute name="data1">
				<value value="//table[@id='AfterHoursPagingContents_Table']/tbody/tr/td" toType="list" toEntryType="string"/>
			</userAttribute>
			<csvtransform outputType="byId" reverse="true" transformClass="org.cld.etl.csv.MultiRowTablesAsCSV">
				<outputDir value="raw/[marketId]/nasdaq-quote-premarket/[endDate]"/>
			</csvtransform>
			<nextTask>
				<condition>data1 != null &amp;&amp; data1.toArray().length>140</condition>
				<invokeTask toCallTaskName="quote-premarket-real"/>
			</nextTask>
		</baseBrowseTask>
	</PrdTask>
	<PrdTask tryPattern="false">
		<baseBrowseTask enableJS="true" dsm="hdfs" taskName="quote-premarket-real" mbMemoryNeeded="1024" isStart="false">
			<param name="marketId"/>
			<param name="stockid"/>
			<param name="startDate"/>
			<param name="endDate"/>
			<param name="timeperiod" type="list" value="1,2,3,4,5,6,7,8,9,10,11"/>
			<param name="HasHeader" type="boolean" value="false"/>
			<startUrl value="'http://www.nasdaq.com/zh/symbol/' + stockid.toLowerCase() + '/premarket?time=' + timeperiod" fromType="expression"/>
			<userAttribute name="dateDisplay">
				<value value="//div[@id='quotes_content_left__panelGoodSymbol']/div[2]/small/text()" toType="date" format="yyyy/MM/dd">
					<strPreprocess trimPost="上一次收盘"/>
				</value>
			</userAttribute>
			<userAttribute name="id">
				<value value="stockid + '_' + (new Date(dateDisplay)).getFullYear() + '-' + ((new Date(dateDisplay)).getMonth()+1) + '-' + (new Date(dateDisplay)).getDate()" fromType="expression"/>
			</userAttribute>
			<userAttribute name="ColNum">
				<value value="3" toType="list" toEntryType="int"/>
			</userAttribute>
			<userAttribute name="data1">
				<value value="//table[@id='AfterHoursPagingContents_Table']/tbody/tr/td" toType="externalList" toEntryType="string"/>
			</userAttribute>
			<csvtransform outputType="byId" reverse="true" transformClass="org.cld.etl.csv.MultiRowTablesAsCSV">
				<outputDir value="raw/[marketId]/nasdaq-quote-premarket/[endDate]"/>
			</csvtransform>
		</baseBrowseTask>
		<nextPage value="//div[@id='pagerContainer']/div[1]/ul[1]/li[last()-1]/a" optional="true"/>
		<lastPageCondition>nextPage == null</lastPageCondition>
	</PrdTask>
</Tasks>
